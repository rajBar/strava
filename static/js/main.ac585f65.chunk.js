(this.webpackJsonpstrava=this.webpackJsonpstrava||[]).push([[0],{47:function(e,t,n){e.exports=n(83)},52:function(e,t,n){},53:function(e,t,n){},78:function(e,t,n){},81:function(e,t,n){},82:function(e,t,n){},83:function(e,t,n){"use strict";n.r(t);var a={};n.r(a),n.d(a,"usersWatcher",(function(){return Re}));var r=n(0),i=n.n(r),c=n(27),s=n.n(c),l=(n(52),n(12)),u=n(13),o=n(16),m=n(15),d=(n(53),n(14)),v=n(7),p=n.n(v),y=n(5),f=n(23),b=n(21),h=n(6),E=n(10),k=n(43),w=n(25),S=(n(78),n(44)),g=function(e){Object(o.a)(n,e);var t=Object(m.a)(n);function n(e){return Object(l.a)(this,n),t.call(this,e)}return Object(u.a)(n,[{key:"parseOptions",value:function(e,t){return{title:"Lifetime "+e+"s",hAxis:{title:"date"},vAxis:{title:"cycle"===e?("km"===t?"k":"m")+"ph":"min/"+("run"===e?t:"km"===t?"100m":"100y"),gridlines:{units:{hours:{format:[""]},minutes:{format:["mm:ss"]},seconds:{format:["mm:ss"]}}}},bubble:{textStyle:{fontSize:11}}}}},{key:"render",value:function(){var e=this.props,t=e.currentActivityType,n=e.activityUnit,a=e.chartData,r=e.chartDataCurrentYear,c=e.currentYear?r:a,s=t?this.parseOptions(t,n):[];return i.a.createElement("div",{className:"App"},i.a.createElement(S.a,{chartType:"BubbleChart",width:"100%",height:"400px",data:c,options:s}))}}]),n}(r.Component),T=n(8),C=n.n(T),j=n(19),O=function(e){return e.users.users.map((function(e){return e.name}))},D=function(e){return e.users.currentUser},U=30,N=60,_=5,F=new Date,x=["Jan","Feb","Mar","Apr","May","June","July","Aug","Sept","Oct","Nov","Dec"][F.getMonth()],R=function(e){return e.activities.activities},A=function(e){return e.activities.currentActivityType},M=function(e){return e.activities.activityUnit},I=Object(j.a)(R,D,(function(e,t){return C.a.find(e,(function(e){return e.name===t}))})),Y=function(e){return e.activities.selectedYear},B=Object(j.a)(R,(function(e){var t=[];return e.forEach((function(e){e.allRuns.forEach((function(e){t.push(e.date.substr(6,2))})),e.allCycles.forEach((function(e){t.push(e.date.substr(6,2))})),e.allSwims.forEach((function(e){t.push(e.date.substr(6,2))}))})),Math.min.apply(Math,t)+2e3})),H=Object(j.a)(I,A,(function(e,t){switch(t){case"run":return null===e||void 0===e?void 0:e.allRuns;case"cycle":return null===e||void 0===e?void 0:e.allCycles;case"swim":return null===e||void 0===e?void 0:e.allSwims}})),Q=function(e,t){var n=new Date(e).getFullYear();return parseInt(t)===parseInt(n)},V=Object(j.a)(R,Y,(function(e,t){var n=[];return e.forEach((function(e){var a=C.a.filter(e.allCycles,(function(e){return Q(e.startDate,t)})),r=C.a.filter(e.allRuns,(function(e){return Q(e.startDate,t)})),i=C.a.filter(e.allSwims,(function(e){return Q(e.startDate,t)})),c=r.reduce((function(e,t){return e+(parseFloat(t.distance)||0)}),0),s=a.reduce((function(e,t){return e+(parseFloat(t.distance)||0)}),0),l=i.reduce((function(e,t){return e+(parseFloat(t.distance)||0)}),0),u=Object(y.a)(Object(y.a)({},e),{},{allRuns:r,runDistance:c.toFixed(2),runDistanceMile:(.6214*c).toFixed(2),runQuantity:r.length,allCycles:a,bikeDistance:s.toFixed(2),bikeDistanceMile:(.6214*s).toFixed(2),bikeQuantity:a.length,allSwims:i,swimDistance:(l/1e3).toFixed(2),swimDistanceMile:(.6214*l/1e3).toFixed(2),swimQuantity:i.length});n.push(u)})),n})),G=Object(j.a)(V,Y,(function(e,t){var n=e.map((function(e){return function(e,t){var n=new Date,a=parseInt(t)===n.getFullYear()?n.getMonth()+1:12,r=U*a,i=N*a,c=_*a,s=e.runDistance,l=e.bikeDistance,u=e.swimDistance,o=s>r?100:s/r*100,m=l>i?100:l/i*100,d=u>c?100:u/c*100,v=(o+m+d)/3===100?(s/r*100+l/i*100+u/c*100)/3:(o+m+d)/3;return Object(y.a)(Object(y.a)({},e),{},{totalPercentage:v})}(e,t)}));return C.a.orderBy(n,["totalPercentage"],["desc"])})),L=Object(j.a)(G,D,(function(e,t){return C.a.find(e,(function(e){return e.name===t}))})),J=Object(j.a)(L,A,(function(e,t){switch(t){case"run":return null===e||void 0===e?void 0:e.allRuns;case"cycle":return null===e||void 0===e?void 0:e.allCycles;case"swim":return null===e||void 0===e?void 0:e.allSwims}})),P=function(e){var t=e.split("/"),n=parseInt(t[0]),a=parseInt(t[1])-1,r=parseInt(t[2])+2e3;return new Date(r,a,n)},X=function(e,t,n){var a=[],r=["ID","Date","run"===t?"N/A":"Speed (km/h)","km"===n?"run"===t?"2.5":"cycle"===t?"5":"swim"===t?"400":"1":"3m","Distance"];return a.push(r),C.a.sortBy(e,(function(e){return parseFloat(e.distance)})).forEach((function(e){var r="km"===n?e.averageSpeed:e.averageSpeedMile,i="km"===n?e.distance:e.distanceMile,c="km"===n?function(e,t){var n=parseFloat(e),a="run"===t?2.5:"cycle"===t?5:"swim"===t?400:1,r=Math.ceil(n/a)*a;return r-a+"k - "+r+"k"}(i,t):function(e){var t=parseFloat(e),n=3*Math.ceil(t/3);return n-3+"m - "+n+"m"}(i),s=parseFloat(r);"run"!==t&&"swim"!==t||(s=function(e){var t=e.toString().split("."),n=parseInt(t[0]),a=parseInt(t[1]);return new Date(2e3,0,1,1,n,a,0)}(r));var l=[r,P(e.date),s,c,parseFloat(i)];a.push(l)})),a},W=Object(j.a)(H,M,A,(function(e,t,n){return X(e,n,t)})),z=Object(j.a)(J,M,A,(function(e,t,n){return X(e,n,t)})),K=Object(d.b)((function(e){return{currentActivityType:A(e),activityUnit:M(e),chartData:W(e),chartDataCurrentYear:z(e)}}),(function(e){return{}}))(g),$=function(e){Object(o.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={tableHead:["Name","No. Runs","Run Distance","No. Cycles","Cycle Distance","No. Swims","Swim Distance"],tableHeadSecond:["Date","Activity","Distance","Average Speed","Activity Time","Elevation Gain"],tableHeadSwim:["Date","Activity","Distance","Average Speed","Activity Time"],sort:{field:"date",direction:!0}},a}return Object(u.a)(n,[{key:"getHeader",value:function(e,t){var n=this;return e.map((function(e){return t?i.a.createElement("th",{className:"myTableHeaders",onClick:function(){return n.setSort(e)}},e):i.a.createElement("th",{className:"myTableHeaders"},e)}))}},{key:"setSort",value:function(e){var t=this.state.sort,n=e!==t.field||!t.direction;this.setState(Object(y.a)(Object(y.a)({},this.state),{},{sort:{field:e,direction:n}}))}},{key:"singleSetUser",value:function(e){var t=this.props,n=t.currentUser,a=t.setCurrentUser;e!==n&&a(e)}},{key:"setUser",value:function(e){var t=this.props,n=t.currentUser,a=t.setCurrentUser,r=window.location.href.split("/"),i=r[r.length-1];this.props.userNames.includes(i)&&i!==e&&(window.location=window.location.href.replace(i,"")),a(n===e?"":e)}},{key:"getRowsData",value:function(e,t){var n=this,a=this.props,r=a.currentUser,c=a.activityUnit,s=e.name;return i.a.createElement("tr",{className:r===s?"selectedRow":"selectableRow",onClick:function(){return n.setUser(s)}},i.a.createElement("td",{key:t,className:"myTableContents"},i.a.createElement(b.b,{className:"hidden-link",to:"/home/".concat(s)},s)),i.a.createElement("td",{key:t,className:"myTableContents"},e.runQuantity),i.a.createElement("td",{key:t,className:"myTableContents"},"km"===c?e.runDistance+"km":e.runDistanceMile+"miles"),i.a.createElement("td",{key:t,className:"myTableContents"},e.bikeQuantity),i.a.createElement("td",{key:t,className:"myTableContents"},"km"===c?e.bikeDistance+"km":e.bikeDistanceMile+"miles"),i.a.createElement("td",{key:t,className:"myTableContents"},e.swimQuantity),i.a.createElement("td",{key:t,className:"myTableContents"},"km"===c?e.swimDistance+"km":e.swimDistanceMile+"miles"))}},{key:"detailedRows",value:function(){var e=this.props,t=e.currentUser,n=e.currentActivityType,a=e.setCurrentActivityType,r=e.activityUnit,c=e.userNames,s=this.getSortedCurrentUserRows();return c.includes(t)?i.a.createElement("div",null,i.a.createElement("button",{className:"run"===n?"selectedButton":"nonSelectedButton",onClick:function(){return a("run")}},"Run"),i.a.createElement("button",{className:"cycle"===n?"selectedButton":"nonSelectedButton",onClick:function(){return a("cycle")}},"Cycle"),i.a.createElement("button",{className:"swim"===n?"selectedButton":"nonSelectedButton",onClick:function(){return a("swim")}},"Swim"),s.length>0?i.a.createElement("div",null,i.a.createElement(K,null),i.a.createElement("table",{className:"myTableTwo"},i.a.createElement("thead",null,i.a.createElement("tr",null,"swim"!==n?this.getHeader(this.state.tableHeadSecond,"sorting function"):this.getHeader(this.state.tableHeadSwim,"sorting function"))),i.a.createElement("tbody",null,s.map((function(e){var t="km"===r?"km":"mile",a="km"===r?"k":"m",c="km"===r?"100m":"100y";return i.a.createElement("tr",null,i.a.createElement("td",null,e.date),i.a.createElement("td",null,e.activity),i.a.createElement("td",null,"km"===r?e.distance+("swim"===n?"m":" km"):e.distanceMile+" miles"),i.a.createElement("td",null,"km"===r?e.averageSpeed:e.averageSpeedMile,"cycle"===n?a+"ph":"min/"+("run"===n?t:c)),i.a.createElement("td",null,e.movingTime," min"),"swim"!==n?i.a.createElement("td",null,e.elevationGain," m"):null)}))))):i.a.createElement("h6",{style:{paddingTop:"20px"}},t," is yet to ",n)):i.a.createElement("br",null)}},{key:"getSortedCurrentUserRows",value:function(){var e=this.props.currentUserCurrentActivityData,t=e?Object(w.a)(e):[],n=this.state.sort;return"Date"===n.field?t=Object(w.a)(e):"Distance"===n.field?t=n.direction?C.a.orderBy(t,(function(e){return Number(e.distance)}),"asc"):C.a.orderBy(t,(function(e){return Number(e.distance)}),"desc"):"Average Speed"===n.field?t=n.direction?C.a.orderBy(t,(function(e){return Number(e.averageSpeed)}),"asc"):C.a.orderBy(t,(function(e){return Number(e.averageSpeed)}),"desc"):"Activity Time"===n.field?t=n.direction?C.a.orderBy(t,"movingTime","asc"):C.a.orderBy(t,"movingTime","desc"):"Elevation Gain"===n.field&&(t=n.direction?C.a.orderBy(t,"elevationGain","asc"):C.a.orderBy(t,"elevationGain","desc")),t}},{key:"render",value:function(){var e=this,t=this.props,n=t.allRows,a=t.activityUnit,r=t.setActivityUnit,c=window.location.href.split("/"),s=c[c.length-1];return this.props.userNames.includes(s)&&this.singleSetUser(s),i.a.createElement("div",null,i.a.createElement("button",{className:"km"===a?"selectedButton":"nonSelectedButton",onClick:function(){return r("km")}},"Km"),i.a.createElement("button",{className:"miles"===a?"selectedButton":"nonSelectedButton",onClick:function(){return r("miles")}},"Miles"),i.a.createElement("table",{className:"myTable"},i.a.createElement("thead",null,i.a.createElement("tr",null,this.getHeader(this.state.tableHead))),i.a.createElement("tbody",null,n.map((function(t,n){return e.getRowsData(t,n)})))),this.detailedRows())}}]),n}(r.Component),q=function(e){return{type:"FETCH_USERS_SUCCESS",payload:{users:e}}},Z=function(e){return{type:"SET_CURRENT_USER",payload:{user:e}}},ee=function(e){return{type:"FETCH_ACTIVITIES_SUCCESS",payload:{activities:e}}},te=function(e){return{type:"SET_CURRENT_ACTIVITY_TYPE",payload:{activityType:e}}},ne=function(e){return{type:"SET_ACTIVITY_UNIT",payload:{activityUnit:e}}},ae=Object(d.b)((function(e){return{allRows:R(e),currentUserCurrentActivityData:H(e),userNames:O(e),currentUser:D(e),currentActivityType:A(e),activityUnit:M(e)}}),(function(e){return{setCurrentUser:function(t){return e(Z(t))},setCurrentActivityType:function(t){return e(te(t))},setActivityUnit:function(t){return e(ne(t))}}}))($),re=n(30),ie=(n(81),function(e){Object(o.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={tableHead:["Name","No. Runs","Run Distance","No. Cycles","Cycle Distance","No. Swims","Swim Distance","Total Complete"],tableHeadSecond:["Date","Activity","Distance","Average Speed","Activity Time","Elevation Gain"],tableHeadSwim:["Date","Activity","Distance","Average Speed","Activity Time"]},a.handleYearChange=a.handleYearChange.bind(Object(re.a)(a)),a}return Object(u.a)(n,[{key:"handleYearChange",value:function(e){(0,this.props.setSelectedYear)(e.target.value)}},{key:"getHeader",value:function(e){return e.map((function(e){return i.a.createElement("th",{className:E.isMobile?"myTableHeadersMobile":"myTableHeaders"},e)}))}},{key:"singleSetUser",value:function(e){var t=this.props,n=t.currentUser,a=t.setCurrentUser;e!==n&&a(e)}},{key:"setUser",value:function(e){var t=this.props,n=t.currentUser,a=t.setCurrentUser,r=window.location.href.split("/"),i=r[r.length-1];this.props.userNames.includes(i)&&i!==e&&(window.location=window.location.href.replace(i,"")),a(n===e?"":e)}},{key:"getRowsData",value:function(e,t){var n=this,a=this.props,r=a.currentUser,c=a.activityUnit,s=e.name,l=E.isMobile?parseFloat(e.runDistance).toFixed(1):e.runDistance,u=E.isMobile?parseFloat(e.runDistanceMile).toFixed(1):e.runDistanceMile,o=E.isMobile?parseFloat(e.bikeDistance).toFixed(1):e.bikeDistance,m=E.isMobile?parseFloat(e.bikeDistanceMile).toFixed(1):e.bikeDistanceMile,d=E.isMobile?parseFloat(e.swimDistance).toFixed(1):e.swimDistance,v=E.isMobile?parseFloat(e.swimDistanceMile).toFixed(1):e.swimDistanceMile,p=e.totalPercentage;return i.a.createElement("tr",{className:r===s?"selectedRow":"selectableRow",onClick:function(){return n.setUser(s)}},p>=100?i.a.createElement("td",{key:t,className:"myTableContents-complete"},s," (completed)"):i.a.createElement("td",{key:t,className:"myTableContents"},i.a.createElement(b.b,{className:"hidden-link",to:"/strava-competition/".concat(s)},s)),i.a.createElement("td",{key:t,className:"myTableContents"},e.runQuantity),i.a.createElement("td",{key:t,className:"myTableContents"},"km"===c?l+"km":u+"miles"),i.a.createElement("td",{key:t,className:"myTableContents"},e.bikeQuantity),i.a.createElement("td",{key:t,className:"myTableContents"},"km"===c?o+"km":m+"miles"),i.a.createElement("td",{key:t,className:"myTableContents"},e.swimQuantity),i.a.createElement("td",{key:t,className:"myTableContents"},"km"===c?d+"km":v+"miles"),i.a.createElement("td",{key:t,className:"myTableContents"},p.toFixed(2),"%"))}},{key:"detailedRows",value:function(){var e=this.props,t=e.currentUser,n=e.currentActivityType,a=e.setCurrentActivityType,r=e.activityUnit,c=e.formattedUserSpecificActivityForCurrentYear,s=e.selectedYear,l=(new Date).getFullYear();return""===t?i.a.createElement("br",null):i.a.createElement("div",null,i.a.createElement("button",{className:"run"===n?"selectedButton":"nonSelectedButton",onClick:function(){return a("run")}},"Run"),i.a.createElement("button",{className:"cycle"===n?"selectedButton":"nonSelectedButton",onClick:function(){return a("cycle")}},"Cycle"),i.a.createElement("button",{className:"swim"===n?"selectedButton":"nonSelectedButton",onClick:function(){return a("swim")}},"Swim"),c.length>0?i.a.createElement("div",null,i.a.createElement(K,{currentYear:!0}),i.a.createElement("table",{className:"myTableTwo"},i.a.createElement("thead",null,i.a.createElement("tr",null,this.getHeader(this.state.tableHeadSecond))),i.a.createElement("tbody",null,c.map((function(e){var t="km"===r?"km":"mile",a="km"===r?"k":"m",c="km"===r?"100m":"100y";return i.a.createElement("tr",null,i.a.createElement("td",null,e.date),i.a.createElement("td",null,e.activity),i.a.createElement("td",null,"km"===r?e.distance+("swim"===n?"m":" km"):e.distanceMile+" miles"),i.a.createElement("td",null,"km"===r?e.averageSpeed:e.averageSpeedMile,"cycle"===n?a+"ph":"min/"+("run"===n?t:c)),i.a.createElement("td",null,e.movingTime," min"),i.a.createElement("td",null,e.elevationGain," m"))}))))):l===s?i.a.createElement("h6",{style:{paddingTop:"20px"}},t," is yet to ",n," this year"):i.a.createElement("h6",{style:{paddingTop:"20px"}},t," did not ",n," in ",s))}},{key:"render",value:function(){var e=this,t=this.props,n=t.allRows,a=t.activityUnit,r=t.setActivityUnit,c=t.selectedYear,s=t.earliestYear,l=F.getMonth()+1,u=(new Date).getFullYear(),o=window.location.href.split("/"),m=o[o.length-1];return this.props.userNames.includes(m)&&this.singleSetUser(m),i.a.createElement("div",null,i.a.createElement("select",{value:c,onChange:this.handleYearChange},Array.from({length:u-s+1},(function(e,t){var n=u-t;return i.a.createElement("option",{key:n,value:n},n)}))),i.a.createElement("br",null),c==u?i.a.createElement("h4",null,"Jan - ",x," Triathlon"):i.a.createElement("h4",null,c," Triathlon"),i.a.createElement("h6",null,"Run ",U*(c==u?l:12)," km, Cycle ",N*(c==u?l:12)," km & Swim ",_*(c==u?l:12)," km"),i.a.createElement("p",{style:{fontSize:"11px",padding:0}},"(",U," km, ",N," km & ",_," km a month)"),i.a.createElement("button",{className:"km"===a?"selectedButton":"nonSelectedButton",onClick:function(){return r("km")}},"Km"),i.a.createElement("button",{className:"miles"===a?"selectedButton":"nonSelectedButton",onClick:function(){return r("miles")}},"Miles"),i.a.createElement("table",{className:"myTable"},i.a.createElement("thead",null,i.a.createElement("tr",null,this.getHeader(this.state.tableHead))),i.a.createElement("tbody",null,n.map((function(t,n){return e.getRowsData(t,n)})))),this.detailedRows())}}]),n}(r.Component)),ce=Object(d.b)((function(e){return{allRows:G(e),formattedUserSpecificActivityForCurrentYear:J(e),userNames:O(e),currentUser:D(e),currentActivityType:A(e),activityUnit:M(e),selectedYear:Y(e),earliestYear:B(e)}}),(function(e){return{setCurrentUser:function(t){return e(Z(t))},setCurrentActivityType:function(t){return e(te(t))},setActivityUnit:function(t){return e(ne(t))},setSelectedYear:function(t){return e({type:"SET_SELECTED_YEAR",payload:{selectedYear:t}})}}}))(ie),se=(n(82),function(e){Object(o.a)(n,e);var t=Object(m.a)(n);function n(e){var a;return Object(l.a)(this,n),(a=t.call(this,e)).state={alerted:!1},a}return Object(u.a)(n,[{key:"notifyPhone",value:function(){var e=Object(f.a)(p.a.mark((function e(){var t,n,a;return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(k.publicIpv4)();case 2:t=e.sent,n=E.isMobile?"".concat(E.mobileVendor," ").concat(E.mobileModel):navigator.platform,a="https://maker.ifttt.com/trigger/site_visited/with/key/b_Yu8_AU_JIDYDYR_WXF5-?value1="+t+"&value2="+n+"&value3=Strava",this.state.alerted||(fetch(a,{method:"post"}).catch((function(e){return console.log(e)})),this.setState(Object(y.a)(Object(y.a)({},this.state),{},{alerted:!0})));case 6:case"end":return e.stop()}}),e,this)})));return function(){return e.apply(this,arguments)}}()},{key:"componentDidMount",value:function(){(0,this.props.fetchUsers)()}},{key:"render",value:function(){return this.notifyPhone(),i.a.createElement("div",null,i.a.createElement(b.a,{basename:"/strava"},i.a.createElement("h2",{className:"myHeading"},i.a.createElement("a",{className:"rajbar-link",href:"https://raj.bar"},"raj.Bar")," ",i.a.createElement(b.b,{className:"rajbar-link",to:"/home"},"/")," ",i.a.createElement(b.b,{className:"rajbar-link",to:"/strava-competition"},"strava")),i.a.createElement(h.b,{exact:!0,path:"/"},i.a.createElement(h.a,{to:"/home"})),i.a.createElement(h.b,{path:"/home",render:function(){return i.a.createElement(ae,null)}}),i.a.createElement(h.b,{path:"/strava-competition",render:function(){return i.a.createElement(ce,null)}})))}}]),n}(r.Component)),le=Object(d.b)((function(){return{}}),(function(e){return{fetchUsers:function(){return e({type:"FETCH_USERS"})}}}))(se),ue=function(e){Object(o.a)(n,e);var t=Object(m.a)(n);function n(){return Object(l.a)(this,n),t.apply(this,arguments)}return Object(u.a)(n,[{key:"render",value:function(){return i.a.createElement("div",{className:"App"},i.a.createElement(le,null))}}]),n}(r.Component),oe=n(17),me=n(46),de={users:[],currentUser:"",error:null},ve=function(e,t){return Object(y.a)(Object(y.a)({},e),{},{users:t.payload.users})},pe=function(e,t){return Object(y.a)(Object(y.a)({},e),{},{error:t.payload.error})},ye=function(e,t){return Object(y.a)(Object(y.a)({},e),{},{currentUser:t.payload.user})},fe={activities:[],currentActivityType:"run",activityUnit:"km",error:null,selectedYear:(new Date).getFullYear()},be=function(e,t){return Object(y.a)(Object(y.a)({},e),{},{activities:t.payload.activities})},he=function(e,t){return Object(y.a)(Object(y.a)({},e),{},{error:t.payload.error})},Ee=function(e,t){return Object(y.a)(Object(y.a)({},e),{},{currentActivityType:t.payload.activityType})},ke=function(e,t){return Object(y.a)(Object(y.a)({},e),{},{activityUnit:t.payload.activityUnit})},we=function(e,t){return Object(y.a)(Object(y.a)({},e),{},{selectedYear:t.payload.selectedYear})},Se=Object(oe.c)({users:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:de,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_USERS_SUCCESS":return ve(e,t);case"FETCH_USERS_FAILURE":return pe(e,t);case"SET_CURRENT_USER":return ye(e,t);default:return e}},activities:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:fe,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"FETCH_ACTIVITIES_SUCCESS":return be(e,t);case"FETCH_ACTIVITIES_FAILURE":return he(e,t);case"SET_CURRENT_ACTIVITY_TYPE":return Ee(e,t);case"SET_ACTIVITY_UNIT":return ke(e,t);case"SET_SELECTED_YEAR":return we(e,t);default:return e}}}),ge=n(11),Te=p.a.mark(Ue),Ce=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.rajbariah.com/strava/activities",e.next=3,fetch("https://api.rajbariah.com/strava/activities").then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}(),je=function(e,t){return Math.round(e+t.distance)},Oe=function(e,t,n){return Object(w.a)(n).filter((function(n){return n.type===e&&n.athlete.id.toString()===t}))},De=function(e,t,n){var a=Oe("Run",e,n),r=a.length>0?a.reduce(je,0)/1e3:0,i=Oe("Ride",e,n),c=i.length>0?i.reduce(je,0)/1e3:0,s=Oe("Swim",e,n),l=s.length>0?s.reduce(je,0)/1e3:0;return{name:t,runQuantity:a.length,runDistance:r,runDistanceMile:(.6214*r).toFixed(2),bikeQuantity:i.length,bikeDistance:c,bikeDistanceMile:(.6214*c).toFixed(2),swimQuantity:s.length,swimDistance:l,swimDistanceMile:(.6214*l).toFixed(2),allRuns:a.map((function(e,t){var n=e.distance/1e3,a=e.moving_time/60,r=(e.distance/1e3).toFixed(2),i=(.6214*n).toFixed(2),c=(e.moving_time/60).toFixed(0),s=1/(n/(a/60))*60,l=Math.floor(s),u=.6*(s-l);"0.60"===u.toFixed(2)&&(l+=1,u=0);var o=(l+u).toFixed(2),m=1/(.6214*n/(a/60))*60,d=Math.floor(m),v=.6*(m-d);"0.60"===u.toFixed(2)&&(d+=1,v=0);var p=(d+v).toFixed(2),y=e.start_date.substr(8,2)+"/"+e.start_date.substr(5,2)+"/"+e.start_date.substr(2,2),f=e.total_elevation_gain;return{date:y,startDate:e.start_date,activity:"Run",distance:r,distanceMile:i,movingTime:c,averageSpeed:o,averageSpeedMile:p,elevationGain:f}})),allCycles:i.map((function(e,t){var n=(e.distance/1e3).toFixed(2),a=(.6214*n).toFixed(2),r=(e.moving_time/60).toFixed(0),i=(n/(r/60)).toFixed(1),c=(.6214*i).toFixed(1),s=e.start_date.substr(8,2)+"/"+e.start_date.substr(5,2)+"/"+e.start_date.substr(2,2),l=e.total_elevation_gain;return{date:s,startDate:e.start_date,activity:"Cycle",distance:n,distanceMile:a,movingTime:r,averageSpeed:i,averageSpeedMile:c,elevationGain:l}})),allSwims:s.map((function(e,t){var n=e.distance/100,a=e.distance/1e3,r=e.moving_time/60,i=e.distance,c=(.6214*a).toFixed(2),s=(e.moving_time/60).toFixed(0),l=1/(n/(r/60))*60,u=Math.floor(l),o=.6*(l-u);"0.60"===o.toFixed(2)&&(u+=1,o=0);var m=(u+o).toFixed(2),d=.6214*a/(r/60),v=100/(1760*d)*60,p=Math.floor(v),y=.6*(v-p);"0.60"===y.toFixed(2)&&(p+=1,y=0);var f=(p+y).toFixed(2);return{date:e.start_date.substr(8,2)+"/"+e.start_date.substr(5,2)+"/"+e.start_date.substr(2,2),startDate:e.start_date,activity:"Swim",distance:i,distanceMile:c,movingTime:s,averageSpeed:m,averageSpeedMile:f}}))}};function Ue(e){var t,n;return p.a.wrap((function(a){for(;;)switch(a.prev=a.next){case 0:return a.prev=0,a.next=3,Object(ge.a)(Ce);case 3:return t=a.sent,n=e.map((function(e){return De(e.athleteID,e.name,t)})),a.next=7,Object(ge.b)(ee(n));case 7:a.next=13;break;case 9:return a.prev=9,a.t0=a.catch(0),a.next=13,Object(ge.b)({type:"FETCH_ACTIVITIES_FAILURE",payload:{error:a.t0}});case 13:case"end":return a.stop()}}),Te,null,[[0,9]])}var Ne=p.a.mark(Fe),_e=function(){var e=Object(f.a)(p.a.mark((function e(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return"https://api.rajbariah.com/strava/users",e.next=3,fetch("https://api.rajbariah.com/strava/users").then((function(e){return e.json()}));case 3:return e.abrupt("return",e.sent);case 4:case"end":return e.stop()}}),e)})));return function(){return e.apply(this,arguments)}}();function Fe(){var e;return p.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.prev=0,t.next=3,Object(ge.a)(_e);case 3:return e=t.sent,t.next=6,Object(ge.b)(q(e));case 6:return t.next=8,Object(ge.a)(Ue,e);case 8:t.next=14;break;case 10:return t.prev=10,t.t0=t.catch(0),t.next=14,Object(ge.b)({type:"FETCH_USERS_FAILURE",payload:{error:t.t0}});case 14:case"end":return t.stop()}}),Ne,null,[[0,10]])}var xe=p.a.mark(Re);function Re(){return p.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return e.next=2,Object(ge.c)("FETCH_USERS",Fe);case 2:case"end":return e.stop()}}),xe)}Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Ae=function(e){var t=Object(me.a)(),n=Object(oe.d)(Object(oe.a)(t),window.__REDUX_DEVTOOLS_EXTENSION__?window.__REDUX_DEVTOOLS_EXTENSION__({name:"strava-stats"}):function(e){return e}),r=Object(oe.e)(Se,e,n);return Object.keys(a).forEach((function(e){t.run(a[e])})),r}({});s.a.render(i.a.createElement(d.a,{store:Ae},i.a.createElement(ue,null)),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[47,1,2]]]);
//# sourceMappingURL=main.ac585f65.chunk.js.map